<div class="card p-p-3">
  <form [formGroup]="form" #formElement (ngSubmit)="salvarCategoria()">
    <div class="p-fluid p-formgrid p-grid">
      <div class="p-field p-col-12">
        <label for="descricao">Descrição</label>
        <input id="descricao" type="text" pInputText formControlName="descricao" />
      </div>
<!-- 
      <div class="p-field p-col-12 p-md-6">
        <label for="imagens">Upload de Imagem</label>
        <p-fileUpload
          #fileUpload
          mode="basic"
          name="imagem"
          accept="image/*"
          [customUpload]="true"
          (onSelect)="onUpload($event); fileUpload.clear()"
          chooseLabel="Selecionar Imagem"
        ></p-fileUpload>
      </div> -->
    </div>

    <div class="p-col-12 mt-4" *ngIf="imagens.length > 0">
      <div class="flex flex-wrap gap-4">
        <div *ngFor="let imagem of imagens; let i = index" class="flex flex-col items-center gap-2 bg-gray-50 p-2 rounded shadow">
          <img [src]="imagem.preview" class="w-24 h-24 object-cover rounded shadow" />
          <div class="flex gap-2">
            <button type="button" pButton icon="pi pi-eye" class="p-button-text" (click)="visualizarImagem(imagem.preview)"></button>
            <button type="button" pButton icon="pi pi-trash" class="p-button-text p-button-danger" (click)="removerImagem(i)"></button>
          </div>
        </div>
      </div>
    </div>

    <div class="flex justify-end gap-2 mt-6">
      <button type="button" (click)="voltar()"
        class="flex items-center gap-2 border border-primary-500 text-primary-500 px-4 py-2 rounded hover:bg-primary-500 hover:text-white transition">
        <i class="pi pi-times"></i>
        Cancelar
      </button>
      <button type="submit" [disabled]="form.invalid"
        class="flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded hover:bg-primary-700 transition disabled:opacity-60 disabled:cursor-not-allowed">
        <i class="pi pi-check"></i>
        Salvar
      </button>
    </div>
  </form>
</div>

<p-dialog header="Visualizar Imagem" [(visible)]="imagemModalVisivel" [modal]="true" [style]="{ width: '50vw' }">
  <img [src]="imagemSelecionada" class="w-full rounded shadow" />
</p-dialog>

<p-toast></p-toast>