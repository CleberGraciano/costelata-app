<div class="card p-p-3">
  <form [formGroup]="filtroForm" (ngSubmit)="pesquisar()">
    <div class="p-fluid p-formgrid p-grid">
      <ng-container *ngxPermissionsOnly="['ADMIN']">
        <div class="p-field p-col-12 p-md-6">
          <label for="nomeFantasia">Nome Fantasia</label>
          <input id="nomeFantasia" type="text" pInputText formControlName="nomeFantasia" />
        </div>
      </ng-container>
      <div class="p-field p-col-12 p-md-3">
        <label for="numeroPedido">Nº Pedido</label>
        <input id="numeroPedido" type="text" pInputText formControlName="numeroPedido" />
      </div>
      <div class="p-field p-col-12 p-md-3">
        <label for="status">Status</label>
        <p-dropdown [options]="statusPedido" formControlName="status" optionLabel="cDescricao"
          placeholder="Selecione um status"></p-dropdown>
      </div>
    </div>
    <div class="flex justify-end gap-3 mt-4">
      <button type="button" (click)="limparFiltro()"
        class="flex items-center gap-2 border border-primary-500 text-primary-500 px-4 py-2 rounded hover:bg-primary-500 hover:text-white transition">
        <i class="pi pi-times"></i>
        Limpar
      </button>
      <button type="submit"
        class="flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded hover:bg-primary-700 transition">
        <i class="pi pi-search"></i>
        Buscar
      </button>
    </div>
  </form>

  <div class="mt-12">
    <p-table [value]="pedidos" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[5,10,20]"
      [responsiveLayout]="'scroll'" [resizableColumns]="true" [sortMode]="'multiple'" [loading]="carregando">
      <ng-template pTemplate="header">
        <tr>
          <th class="!text-left">
            <div class="flex items-center gap-1" pSortableColumn="numeroPedido">
              Nº Pedido <p-sortIcon field="numeroPedido" styleClass="text-sm"></p-sortIcon>
            </div>
          </th>
          <th class="!text-left">
            <div class="flex items-center gap-1" pSortableColumn="cliente">
              Cliente <p-sortIcon field="cliente" styleClass="text-sm"></p-sortIcon>
            </div>
          </th>
          <th class="!text-left">
            <div class="flex items-center gap-1" pSortableColumn="cnpjCpf">
              CNPJ/CPF <p-sortIcon field="cnpjCpf" styleClass="text-sm"></p-sortIcon>
            </div>
          </th>
          <th class="!text-left">
            <div class="flex items-center gap-1" pSortableColumn="email">
              Email <p-sortIcon field="email" styleClass="text-sm"></p-sortIcon>
            </div>
          </th>
          <th class="!text-left">
            <div class="flex items-center gap-1" pSortableColumn="status">
              Status <p-sortIcon field="status" styleClass="text-sm"></p-sortIcon>
            </div>
          </th>
          <th class="!text-left">Ações</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-pedido>
        <tr>
          <td>{{ pedido.numeroPedido }}</td>
          <td>{{ pedido.cliente }}</td>
          <td>{{ pedido.cnpjCpf }}</td>
          <td>{{ pedido.email }}</td>
          <td>{{ pedido.status }}</td>
          <td class="flex justify-start gap-2">
            <!-- <button pButton icon="pi pi-pencil" type="button"
              class="p-button p-button-rounded border-none text-primary-400 hover:text-primary-600"
              pTooltip="Editar Pedido" tooltipPosition="top" (click)="editar(pedido)">
            </button>
            <button pButton [icon]="pedido.status === 'Ativo' ? 'pi pi-eye' : 'pi pi-eye-slash'" type="button"
              class="p-button p-button-rounded border-none text-primary-600 hover:text-primary-500"
              [pTooltip]="pedido.status === 'Ativo' ? 'Bloquear Pedido' : 'Ativar Pedido'" tooltipPosition="top"
              (click)="alterarStatus(pedido)">
            </button> -->
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6" class="text-center">Nenhum pedido encontrado.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>